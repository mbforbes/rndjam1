\newcommand{\matrix}[1]{\mathbf{#1}}
\newcommand{\vector}[1]{\mathbf{#1}}
% define vars upfront
\newcommand{\X}{\matrix{X}}
\newcommand{\y}{\vector{y}}
\newcommand{\w}{\vector{w}}
\begin{align*}
\frac{\partial}{\partial \w} \left[ \frac{1}{n} \mathcal{L}_{LS}(\X,\y,\w) \right] &= \frac{1}{n} \frac{\partial}{\partial \w} \left[ \mathcal{L}_{LS}(\X,\y,\w) \right] \\
&= \frac{1}{n} \left( -2\y^T\X + 2\w^T\X^T\X \right) \\
&= \frac{2}{n} \left( \w^T\X^T\X - \y^T\X \right) \\
&= \frac{2}{n} \left( \X^T\X\w - \X^T\y \right) \quad \text{ transpose to get column vector} \\
\end{align*}
