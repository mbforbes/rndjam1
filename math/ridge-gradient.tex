% preamble
\newcommand{\matrix}[1]{\mathbf{#1}}
\newcommand{\vector}[1]{\mathbf{#1}}
\newcommand{\X}{\matrix{X}}
\newcommand{\y}{\vector{y}}
\newcommand{\w}{\vector{w}}
% ridge derivative
\begin{align*}
\frac{\partial}{\partial \w} \mathcal{L}_{RR} (\X,\y,\w,\lambda) &= \frac{1}{n} 2(\y - \X\w)^T (-\X) + \lambda 2 \w^T \\
&= 2 \lambda \w^T - \frac{2}{n} (\y - \X\w)^T \X \\
&= 2 \lambda \w - \frac{2}{n} \X^T (\y - \X\w) \quad \text{transpose to get column vector} \\
&= 2 \lambda \w + \frac{2}{n} \X^T (\X\w - \y) \\
% &= 2 \left( \lambda \w^T - \frac{1}{n}(\y^T\X + \w^T\X^T\X) \right) \\
% &= 2 \left( \lambda \w - \frac{1}{n}(\X^T\y + \X^T\X\w) \right) \quad \text{ transpose to get column vector} \\
\end{align*}
